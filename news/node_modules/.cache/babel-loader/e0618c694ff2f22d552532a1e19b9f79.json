{"ast":null,"code":"import * as React from 'react';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport raf from \"rc-util/es/raf\";\nimport { getFocusNodeList } from \"rc-util/es/Dom/focus\";\nvar ESC = KeyCode.ESC,\n    TAB = KeyCode.TAB;\nexport default function useAccessibility(_ref) {\n  var visible = _ref.visible,\n      setTriggerVisible = _ref.setTriggerVisible,\n      triggerRef = _ref.triggerRef,\n      onVisibleChange = _ref.onVisibleChange,\n      autoFocus = _ref.autoFocus;\n  var focusMenuRef = React.useRef(false);\n\n  var handleCloseMenuAndReturnFocus = function handleCloseMenuAndReturnFocus() {\n    if (visible && triggerRef.current) {\n      var _triggerRef$current, _triggerRef$current$t, _triggerRef$current$t2, _triggerRef$current$t3;\n\n      (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : (_triggerRef$current$t = _triggerRef$current.triggerRef) === null || _triggerRef$current$t === void 0 ? void 0 : (_triggerRef$current$t2 = _triggerRef$current$t.current) === null || _triggerRef$current$t2 === void 0 ? void 0 : (_triggerRef$current$t3 = _triggerRef$current$t2.focus) === null || _triggerRef$current$t3 === void 0 ? void 0 : _triggerRef$current$t3.call(_triggerRef$current$t2);\n      setTriggerVisible(false);\n\n      if (typeof onVisibleChange === 'function') {\n        onVisibleChange(false);\n      }\n    }\n  };\n\n  var focusMenu = function focusMenu() {\n    var _triggerRef$current2, _triggerRef$current2$, _triggerRef$current2$2, _triggerRef$current2$3;\n\n    var elements = getFocusNodeList((_triggerRef$current2 = triggerRef.current) === null || _triggerRef$current2 === void 0 ? void 0 : (_triggerRef$current2$ = _triggerRef$current2.popupRef) === null || _triggerRef$current2$ === void 0 ? void 0 : (_triggerRef$current2$2 = _triggerRef$current2$.current) === null || _triggerRef$current2$2 === void 0 ? void 0 : (_triggerRef$current2$3 = _triggerRef$current2$2.getElement) === null || _triggerRef$current2$3 === void 0 ? void 0 : _triggerRef$current2$3.call(_triggerRef$current2$2));\n    var firstElement = elements[0];\n\n    if (firstElement === null || firstElement === void 0 ? void 0 : firstElement.focus) {\n      firstElement.focus();\n      focusMenuRef.current = true;\n      return true;\n    }\n\n    return false;\n  };\n\n  var handleKeyDown = function handleKeyDown(event) {\n    switch (event.keyCode) {\n      case ESC:\n        handleCloseMenuAndReturnFocus();\n        break;\n\n      case TAB:\n        {\n          var focusResult = false;\n\n          if (!focusMenuRef.current) {\n            focusResult = focusMenu();\n          }\n\n          if (focusResult) {\n            event.preventDefault();\n          } else {\n            handleCloseMenuAndReturnFocus();\n          }\n\n          break;\n        }\n    }\n  };\n\n  React.useEffect(function () {\n    if (visible) {\n      window.addEventListener('keydown', handleKeyDown);\n\n      if (autoFocus) {\n        // FIXME: hack with raf\n        raf(focusMenu, 3);\n      }\n\n      return function () {\n        window.removeEventListener('keydown', handleKeyDown);\n        focusMenuRef.current = false;\n      };\n    }\n\n    return function () {\n      focusMenuRef.current = false;\n    };\n  }, [visible]); // eslint-disable-line react-hooks/exhaustive-deps\n}","map":{"version":3,"names":["React","KeyCode","raf","getFocusNodeList","ESC","TAB","useAccessibility","_ref","visible","setTriggerVisible","triggerRef","onVisibleChange","autoFocus","focusMenuRef","useRef","handleCloseMenuAndReturnFocus","current","_triggerRef$current","_triggerRef$current$t","_triggerRef$current$t2","_triggerRef$current$t3","focus","call","focusMenu","_triggerRef$current2","_triggerRef$current2$","_triggerRef$current2$2","_triggerRef$current2$3","elements","popupRef","getElement","firstElement","handleKeyDown","event","keyCode","focusResult","preventDefault","useEffect","window","addEventListener","removeEventListener"],"sources":["C:/xampp/htdocs/project7-1/news/node_modules/rc-dropdown/es/hooks/useAccessibility.js"],"sourcesContent":["import * as React from 'react';\r\nimport KeyCode from \"rc-util/es/KeyCode\";\r\nimport raf from \"rc-util/es/raf\";\r\nimport { getFocusNodeList } from \"rc-util/es/Dom/focus\";\r\nvar ESC = KeyCode.ESC,\r\n    TAB = KeyCode.TAB;\r\nexport default function useAccessibility(_ref) {\r\n  var visible = _ref.visible,\r\n      setTriggerVisible = _ref.setTriggerVisible,\r\n      triggerRef = _ref.triggerRef,\r\n      onVisibleChange = _ref.onVisibleChange,\r\n      autoFocus = _ref.autoFocus;\r\n  var focusMenuRef = React.useRef(false);\r\n\r\n  var handleCloseMenuAndReturnFocus = function handleCloseMenuAndReturnFocus() {\r\n    if (visible && triggerRef.current) {\r\n      var _triggerRef$current, _triggerRef$current$t, _triggerRef$current$t2, _triggerRef$current$t3;\r\n\r\n      (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : (_triggerRef$current$t = _triggerRef$current.triggerRef) === null || _triggerRef$current$t === void 0 ? void 0 : (_triggerRef$current$t2 = _triggerRef$current$t.current) === null || _triggerRef$current$t2 === void 0 ? void 0 : (_triggerRef$current$t3 = _triggerRef$current$t2.focus) === null || _triggerRef$current$t3 === void 0 ? void 0 : _triggerRef$current$t3.call(_triggerRef$current$t2);\r\n      setTriggerVisible(false);\r\n\r\n      if (typeof onVisibleChange === 'function') {\r\n        onVisibleChange(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  var focusMenu = function focusMenu() {\r\n    var _triggerRef$current2, _triggerRef$current2$, _triggerRef$current2$2, _triggerRef$current2$3;\r\n\r\n    var elements = getFocusNodeList((_triggerRef$current2 = triggerRef.current) === null || _triggerRef$current2 === void 0 ? void 0 : (_triggerRef$current2$ = _triggerRef$current2.popupRef) === null || _triggerRef$current2$ === void 0 ? void 0 : (_triggerRef$current2$2 = _triggerRef$current2$.current) === null || _triggerRef$current2$2 === void 0 ? void 0 : (_triggerRef$current2$3 = _triggerRef$current2$2.getElement) === null || _triggerRef$current2$3 === void 0 ? void 0 : _triggerRef$current2$3.call(_triggerRef$current2$2));\r\n    var firstElement = elements[0];\r\n\r\n    if (firstElement === null || firstElement === void 0 ? void 0 : firstElement.focus) {\r\n      firstElement.focus();\r\n      focusMenuRef.current = true;\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  };\r\n\r\n  var handleKeyDown = function handleKeyDown(event) {\r\n    switch (event.keyCode) {\r\n      case ESC:\r\n        handleCloseMenuAndReturnFocus();\r\n        break;\r\n\r\n      case TAB:\r\n        {\r\n          var focusResult = false;\r\n\r\n          if (!focusMenuRef.current) {\r\n            focusResult = focusMenu();\r\n          }\r\n\r\n          if (focusResult) {\r\n            event.preventDefault();\r\n          } else {\r\n            handleCloseMenuAndReturnFocus();\r\n          }\r\n\r\n          break;\r\n        }\r\n    }\r\n  };\r\n\r\n  React.useEffect(function () {\r\n    if (visible) {\r\n      window.addEventListener('keydown', handleKeyDown);\r\n\r\n      if (autoFocus) {\r\n        // FIXME: hack with raf\r\n        raf(focusMenu, 3);\r\n      }\r\n\r\n      return function () {\r\n        window.removeEventListener('keydown', handleKeyDown);\r\n        focusMenuRef.current = false;\r\n      };\r\n    }\r\n\r\n    return function () {\r\n      focusMenuRef.current = false;\r\n    };\r\n  }, [visible]); // eslint-disable-line react-hooks/exhaustive-deps\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}